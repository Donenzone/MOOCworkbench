{% extends "experiments_manager/experiments_table.html" %}
{% load django_bootstrap_breadcrumbs %}
{% load bootstrap3 %}

{% block breadcrumbs %}
    {{ block.super }}
    {% breadcrumb "Create New Experiment" "experiment_new" %}
{% endblock %}


{% block content %}
    <div class="progress">
        <div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"
             style="width: 75%;">
            <span class="sr-only">75% Complete</span>
        </div>
    </div>

    <hr/>

    <h2>Create New Experiment</h2>
    <p class="lead">Your First Steps</p>

    <h3>1. Enable Automatic Builds</h3>
    <div class="row">

        <div class="row">
            <div class="col-md-6">
                <div class="panel panel-default">
                    <div class="panel-heading">Continuous integration</div>
                    <div class="panel-body" id="ci">
                        <p>{% include "build_manager/build_status.html" %}</p>
                    </div>
                </div>
            </div>
        </div>

        <h3>2. Enable Code Coverage</h3>
        <div class="row">
            <div class="col-md-6">
                <div class="panel panel-default">
                    <div class="panel-heading">Code coverage</div>
                    <div class="panel-body" id="ci">
                        <p>{% include "coverage_manager/coverage_status.html" %}</p>
                    </div>
                </div>
            </div>
        </div>

        <h3>3. Set-up Your Experiment Locally</h3>
        <p class="lead">Execute these commands to get started quickly with your new experiment.
        </p>
        <p class="lead">With these commands, among other things, you are setting up a virtualenv for Python experiments,
            which is an encapsulated sandbox where you install your dependencies, which helps reproducibility of your
            experiment.
        </p>
        <p class="lead">For R, Packrat is used to help with dependency management.</p>

        <!-- Nav tabs -->
        <ul class="nav nav-tabs" role="tablist">
            <li role="presentation" class="active"><a href="#nix" aria-controls="home" role="tab" data-toggle="tab">macOS
                and Linux</a></li>
            <li role="presentation"><a href="#windows" aria-controls="profile" role="tab" data-toggle="tab">Windows</a>
            </li>
        </ul>

        <div class="tab-content">
            <div role="tabpanel" class="tab-pane active" id="nix">
                <h4>For macOS and Linux</h4>
                <ol>
                    <li>Clone your new experiment with the following command:
                        <pre>git clone git@github.com:{{ github_username }}/{{ reposlug }}.git</pre>
                    </li>
                    <li>Take a moment to look at what commands make supports:
                        <pre>make</pre>
                    </li>
                    <li>Then, create a virtual environment:
                        <pre>make create_environment</pre>
                    </li>
                    <li>Activate the environment with:
                        <pre>source activate {{ reposlug }}</pre>
                    </li>
                    <li>Install the dependencies:
                        <pre>make requirements</pre>
                    </li>
                    <li>Run the tests:
                        <pre>make test</pre>
                    </li>
                </ol>
            </div>
            <div role="tabpanel" class="tab-pane" id="windows">
                <h4>For Windows</h4>
                <ol>
                    <li>Clone your new experiment with the following command:
                        <pre>git clone git@github.com:{{ github_username }}/{{ reposlug }}.git</pre>
                    </li>
                    <li>Set up a new virtual environment for your project:
                        <pre>virtualenv -p python3 ~/.venv{{ reposlug|lower }}</pre>
                    </li>
                    <li>Activate your virtual environment:
                        <pre>source ~/.venv{{ reposlug|lower }}/bin/activate</pre>
                    </li>
                    <li>Make your new repository folder active:
                        <pre>cd {{ reposlug }}</pre>
                    </li>
                    <li>Install the initial dependencies:
                        <pre>pip3 install -r requirements.txt</pre>
                    </li>
                    <li>Check if the tests run:
                        <pre>python3 test_runner.py</pre>
                    </li>
                </ol>
            </div>
        </div>
    </div>

    <p><a href="{% url "experiment_detail" object_id object.slug %}#intro" class="btn btn-success">Continue</a></p>

{% endblock %}
